<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="&quot;Postprocess and add context to your 'HECRAS_model_catalog'&quot;
">
<title>Mapping RRASSLER • RRASSLER</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Mapping RRASSLER">
<meta property="og:description" content="&quot;Postprocess and add context to your 'HECRAS_model_catalog'&quot;
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">RRASSLER</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/index.html">Articles</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/NOAA-OWP/RRASSLER/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Mapping RRASSLER</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/NOAA-OWP/RRASSLER/blob/HEAD/vignettes/mapping-rrassler.Rmd" class="external-link"><code>vignettes/mapping-rrassler.Rmd</code></a></small>
      <div class="d-none name"><code>mapping-rrassler.Rmd</code></div>
    </div>

    
    
<p><img src="https://raw.githubusercontent.com/JimColl/RRASSLER/main/man/figures/Files.PNG"></p>
<p>The primary use of RRASSLER is to spin out a accountable set of
models. This “database” has a consistent structure and the herein
described metadata and assorted sidecar files which make that data more
FAIR.</p>
<div class="section level2">
<h2 id="model-catalog">Model Catalog<a class="anchor" aria-label="anchor" href="#model-catalog"></a>
</h2>
<p>Users may look at the <em>model_catalog.csv</em>’s, and the models
underneath, but should avoid manual manipulation of individual files,
paths, or other aspects. RRASSLER scripts will do all needed
manipulation, file sorting, and cataloging for you but there is very
limited error checking should the workflow be applied incorrectly. As a
general rule of thumb, once you’ve selected your destination for the
catalog, only manipulate the csv, preferably <em>never</em> with EXCEL,
which may chew up data along edge cases.</p>
</div>
<div class="section level2">
<h2 id="postprocessing">“PostProcessing”<a class="anchor" aria-label="anchor" href="#postprocessing"></a>
</h2>
<p>There is not really a delineation between processing steps within
RRASSLER, ones the files have been placed into the RRASSL’d structure
the bulk of the work is done but it would be nice if we could put a
spatial index and tracking sheet together programatically. That is what
these final steps accomplish, parsing out the different units and
RRASSL’d metadata and placing them in single files which makes them more
findable. There are two primary parts to PostProcessing: Generating the
catalog index and mapping utilities.</p>
<div class="section level3">
<h3 id="a-if-you-need-to-pick-up-after-a-previous-run-make-sure-you-set-your-catalog-location-appropritly">1A) If you need to pick up after a previous run make sure you set
your catalog location appropritly<a class="anchor" aria-label="anchor" href="#a-if-you-need-to-pick-up-after-a-previous-run-make-sure-you-set-your-catalog-location-appropritly"></a>
</h3>
</div>
</div>
<div class="section level2">
<h2 id="internal-to-the-package">Internal to the package<a class="anchor" aria-label="anchor" href="#internal-to-the-package"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ras_dbase</span> <span class="op">&lt;-</span> <span class="st">"../inst/extdata/sample_output/ras_catalog/"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="a-local-path">A Local path<a class="anchor" aria-label="anchor" href="#a-local-path"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ras_dbase</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="st">"~/data/ras_catalog/"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="or-set-a-cloud-account-and-path-up-like-so">Or set a cloud account and path up like so:<a class="anchor" aria-label="anchor" href="#or-set-a-cloud-account-and-path-up-like-so"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"AWS_ACCESS_KEY_ID"</span> <span class="op">=</span> <span class="st">"AKIASUPERSECRET"</span>,<span class="st">"AWS_SECRET_ACCESS_KEY"</span> <span class="op">=</span> <span class="st">"evenmoresecret"</span>,<span class="st">"AWS_DEFAULT_REGION"</span> <span class="op">=</span> <span class="st">"us-also-secret"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span><span class="st">"AWS_ACCESS_KEY_ID"</span> <span class="op">=</span> <span class="st">"AKIAZMS5YKH7KECCDHOA"</span>,<span class="st">"AWS_SECRET_ACCESS_KEY"</span> <span class="op">=</span> <span class="st">"ccoMD3BdJRXR8GunZK4iE7Lf7NfpdGzrDiYBE+tl"</span>,<span class="st">"AWS_DEFAULT_REGION"</span> <span class="op">=</span> <span class="st">"us-east-2"</span><span class="op">)</span></span>
<span><span class="va">ras_dbase</span> <span class="op">&lt;-</span> <span class="st">"s3://ras-models/"</span></span></code></pre></div>
<div class="section level3">
<h3 id="remerge-the-generated-catalog-index">1) Remerge the generated catalog index<a class="anchor" aria-label="anchor" href="#remerge-the-generated-catalog-index"></a>
</h3>
<p>These catalog index files are simply summations of the entirety of
the RRASSLE’d structure. We’re</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/refresh_master_files.html">refresh_master_files</a></span><span class="op">(</span>path_to_ras_dbase <span class="op">=</span> <span class="va">ras_dbase</span>,is_verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>This will create or recreate the index files at the top of the
catalog, including:<br>
* Model footprints: <em>model_footprints.fgb</em><br>
* Cross sections: <em>XS.fgb</em><br>
* Points: <em>point_database.parquet</em></p>
<p><img src="https://raw.githubusercontent.com/JimColl/RRASSLER/main/man/figures/GIS_features.PNG"></p>
</div>
</div>
<div class="section level2">
<h2 id="what-did-that-make">What did that make?<a class="anchor" aria-label="anchor" href="#what-did-that-make"></a>
</h2>
<blockquote>
<p><a href="https://noaa-owp.github.io/hydrofabric/articles/cs_dm.html" class="external-link">in
line with Next Gen hydrofabric parameters</a></p>
</blockquote>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">points</span> <span class="op">&lt;-</span> <span class="fu">arrow</span><span class="fu">::</span><span class="fu"><a href="https://arrow.apache.org/docs/r/reference/read_parquet.html" class="external-link">read_parquet</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">ras_dbase</span>,<span class="st">"point_database.parquet"</span>,fsep <span class="op">=</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">file.sep</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">points</span></span>
<span><span class="va">cross_sections</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">ras_dbase</span>,<span class="st">"xs.fgb"</span>,fsep <span class="op">=</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">file.sep</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cross_sections</span></span>
<span><span class="va">footprints</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">ras_dbase</span>,<span class="st">"model_footprints.fgb"</span>,fsep <span class="op">=</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">file.sep</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">footprints</span></span>
<span><span class="fu">mapview</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html" class="external-link">mapview</a></span><span class="op">(</span><span class="va">footprints</span><span class="op">)</span> <span class="op">+</span> <span class="fu">mapview</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html" class="external-link">mapview</a></span><span class="op">(</span><span class="va">cross_sections</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="sc">&gt;</span> points <span class="ot">&lt;-</span> arrow<span class="sc">::</span><span class="fu">read_parquet</span>(<span class="fu">file.path</span>(<span class="fu">gsub</span>(<span class="st">"/$"</span>, <span class="st">""</span>, ras_dbase),<span class="st">"/point_database.parquet"</span>,<span class="at">fsep =</span> .Platform<span class="sc">$</span>file.sep))</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="sc">&gt;</span> points</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>         xid    xid_length      xid_d         x        y         z    n source master_id</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>      <span class="dv">1</span><span class="sc">:</span>   <span class="dv">1</span>  <span class="fl">231.8369</span> [m]    <span class="fl">0.00000</span> <span class="sc">-</span><span class="fl">97.29359</span> <span class="fl">29.98529</span> <span class="fl">137.83666</span> <span class="fl">0.05</span>      <span class="dv">3</span>         <span class="dv">1</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>      <span class="dv">2</span><span class="sc">:</span>   <span class="dv">1</span>  <span class="fl">231.8369</span> [m]    <span class="fl">0.85344</span> <span class="sc">-</span><span class="fl">97.29358</span> <span class="fl">29.98528</span> <span class="fl">137.83666</span> <span class="fl">0.05</span>      <span class="dv">3</span>         <span class="dv">1</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>      <span class="dv">3</span><span class="sc">:</span>   <span class="dv">1</span>  <span class="fl">231.8369</span> [m]    <span class="fl">2.56032</span> <span class="sc">-</span><span class="fl">97.29358</span> <span class="fl">29.98527</span> <span class="fl">137.68426</span> <span class="fl">0.05</span>      <span class="dv">3</span>         <span class="dv">1</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>      <span class="dv">4</span><span class="sc">:</span>   <span class="dv">1</span>  <span class="fl">231.8369</span> [m]    <span class="fl">4.23672</span> <span class="sc">-</span><span class="fl">97.29357</span> <span class="fl">29.98525</span> <span class="fl">137.62330</span> <span class="fl">0.05</span>      <span class="dv">3</span>         <span class="dv">1</span></span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>      <span class="dv">5</span><span class="sc">:</span>   <span class="dv">1</span>  <span class="fl">231.8369</span> [m]    <span class="fl">6.79704</span> <span class="sc">-</span><span class="fl">97.29356</span> <span class="fl">29.98523</span> <span class="fl">137.47699</span> <span class="fl">0.05</span>      <span class="dv">3</span>         <span class="dv">1</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>      </span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="sc">&gt;</span> cross_sections <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="fu">file.path</span>(ras_dbase,<span class="st">"xs.fgb"</span>,<span class="at">fsep =</span> .Platform<span class="sc">$</span>file.sep))</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>Reading layer <span class="st">`</span><span class="at">XS' from data source </span><span class="st">`</span>G<span class="sc">:</span>\data\ras_catalog\XS.fgb<span class="st">' using driver `FlatGeobuf'</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>Simple feature collection with <span class="dv">24901</span> features and <span class="dv">1</span> field</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>Geometry type<span class="sc">:</span> LINESTRING</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>Dimension<span class="sc">:</span>     XY</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>Bounding box<span class="sc">:</span>  xmin<span class="sc">:</span> <span class="sc">-</span><span class="fl">97.60178</span> ymin<span class="sc">:</span> <span class="fl">29.69069</span> xmax<span class="sc">:</span> <span class="sc">-</span><span class="fl">96.44944</span> ymax<span class="sc">:</span> <span class="fl">30.41321</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>Geodetic CRS<span class="sc">:</span>  <span class="fu">NAD83</span>(<span class="dv">2011</span>) <span class="sc">+</span> NAVD88 height</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="sc">&gt;</span> cross_sections</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>Simple feature collection with <span class="dv">24901</span> features and <span class="dv">1</span> field</span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a>Geometry type<span class="sc">:</span> LINESTRING</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a>Dimension<span class="sc">:</span>     XY</span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a>Bounding box<span class="sc">:</span>  xmin<span class="sc">:</span> <span class="sc">-</span><span class="fl">97.60178</span> ymin<span class="sc">:</span> <span class="fl">29.69069</span> xmax<span class="sc">:</span> <span class="sc">-</span><span class="fl">96.44944</span> ymax<span class="sc">:</span> <span class="fl">30.41321</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a>Geodetic CRS<span class="sc">:</span>  <span class="fu">NAD83</span>(<span class="dv">2011</span>) <span class="sc">+</span> NAVD88 height</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a>First <span class="dv">5</span> features<span class="sc">:</span></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a>   master_id                       geometry</span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="dv">1</span>      <span class="dv">12038</span> <span class="fu">LINESTRING</span> (<span class="sc">-</span><span class="fl">96.50289</span> <span class="dv">29</span>.<span class="dv">71</span>...</span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a><span class="dv">2</span>      <span class="dv">11520</span> <span class="fu">LINESTRING</span> (<span class="sc">-</span><span class="fl">96.50289</span> <span class="dv">29</span>.<span class="dv">71</span>...</span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a><span class="dv">3</span>      <span class="dv">11779</span> <span class="fu">LINESTRING</span> (<span class="sc">-</span><span class="fl">96.50289</span> <span class="dv">29</span>.<span class="dv">71</span>...</span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a><span class="dv">4</span>      <span class="dv">11261</span> <span class="fu">LINESTRING</span> (<span class="sc">-</span><span class="fl">96.50289</span> <span class="dv">29</span>.<span class="dv">71</span>...</span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="dv">5</span>      <span class="dv">12037</span> <span class="fu">LINESTRING</span> (<span class="sc">-</span><span class="fl">96.48813</span> <span class="dv">29</span>.<span class="dv">73</span>...</span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a><span class="sc">&gt;</span> footprints <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(<span class="fu">file.path</span>(ras_dbase,<span class="st">"model_footprints.fgb"</span>,<span class="at">fsep =</span> .Platform<span class="sc">$</span>file.sep))</span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a>Reading layer <span class="st">`</span><span class="at">model_footprints' from data source </span><span class="st">`</span>G<span class="sc">:</span>\data\ras_catalog\model_footprints.fgb<span class="st">' using driver `FlatGeobuf'</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a>Simple feature collection with <span class="dv">1316</span> features and <span class="dv">7</span> fields</span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a>Geometry type<span class="sc">:</span> POLYGON</span>
<span id="cb6-35"><a href="#cb6-35" tabindex="-1"></a>Dimension<span class="sc">:</span>     XY</span>
<span id="cb6-36"><a href="#cb6-36" tabindex="-1"></a>Bounding box<span class="sc">:</span>  xmin<span class="sc">:</span> <span class="sc">-</span><span class="fl">97.60178</span> ymin<span class="sc">:</span> <span class="fl">29.69069</span> xmax<span class="sc">:</span> <span class="sc">-</span><span class="fl">96.44944</span> ymax<span class="sc">:</span> <span class="fl">30.41321</span></span>
<span id="cb6-37"><a href="#cb6-37" tabindex="-1"></a>Geodetic CRS<span class="sc">:</span>  WGS <span class="dv">84</span></span>
<span id="cb6-38"><a href="#cb6-38" tabindex="-1"></a><span class="sc">&gt;</span> footprints</span>
<span id="cb6-39"><a href="#cb6-39" tabindex="-1"></a>Simple feature collection with <span class="dv">1316</span> features and <span class="dv">7</span> fields</span>
<span id="cb6-40"><a href="#cb6-40" tabindex="-1"></a>Geometry type<span class="sc">:</span> POLYGON</span>
<span id="cb6-41"><a href="#cb6-41" tabindex="-1"></a>Dimension<span class="sc">:</span>     XY</span>
<span id="cb6-42"><a href="#cb6-42" tabindex="-1"></a>Bounding box<span class="sc">:</span>  xmin<span class="sc">:</span> <span class="sc">-</span><span class="fl">97.60178</span> ymin<span class="sc">:</span> <span class="fl">29.69069</span> xmax<span class="sc">:</span> <span class="sc">-</span><span class="fl">96.44944</span> ymax<span class="sc">:</span> <span class="fl">30.41321</span></span>
<span id="cb6-43"><a href="#cb6-43" tabindex="-1"></a>Geodetic CRS<span class="sc">:</span>  WGS <span class="dv">84</span></span>
<span id="cb6-44"><a href="#cb6-44" tabindex="-1"></a>First <span class="dv">5</span> features<span class="sc">:</span></span>
<span id="cb6-45"><a href="#cb6-45" tabindex="-1"></a>   start_master_id        Name       crs units                               path        source end_master_id                       geometry</span>
<span id="cb6-46"><a href="#cb6-46" tabindex="-1"></a><span class="dv">1</span>              <span class="dv">897</span> BUCKNER <span class="dv">001</span> EPSG<span class="sc">:</span><span class="dv">2277</span>  Foot       2_BUCKNER 001_g01_1688926581 FEMA Region <span class="dv">6</span>           <span class="dv">909</span> <span class="fu">POLYGON</span> ((<span class="sc">-</span><span class="fl">96.58433</span> <span class="dv">29</span>.<span class="dv">7028</span>...</span>
<span id="cb6-47"><a href="#cb6-47" tabindex="-1"></a><span class="dv">2</span>             <span class="dv">1111</span> BUCKNER <span class="dv">035</span> EPSG<span class="sc">:</span><span class="dv">2277</span>  Foot       2_BUCKNER 035_g01_1688926582 FEMA Region <span class="dv">6</span>          <span class="dv">1125</span> <span class="fu">POLYGON</span> ((<span class="sc">-</span><span class="fl">96.53977</span> <span class="dv">29</span>.<span class="dv">7482</span>...</span>
<span id="cb6-48"><a href="#cb6-48" tabindex="-1"></a><span class="dv">3</span>            <span class="dv">23285</span>   CLEAR <span class="dv">002</span> EPSG<span class="sc">:</span><span class="dv">2277</span>  Foot   5791782_CLEAR 002_g01_1688926594 FEMA Region <span class="dv">6</span>         <span class="dv">23291</span> <span class="fu">POLYGON</span> ((<span class="sc">-</span><span class="fl">96.54638</span> <span class="dv">29</span>.<span class="dv">7554</span>...</span>
<span id="cb6-49"><a href="#cb6-49" tabindex="-1"></a><span class="dv">4</span>            <span class="dv">23279</span>   CLEAR <span class="dv">001</span> EPSG<span class="sc">:</span><span class="dv">2277</span>  Foot   5791782_CLEAR 001_g01_1688926594 FEMA Region <span class="dv">6</span>         <span class="dv">23284</span> <span class="fu">POLYGON</span> ((<span class="sc">-</span><span class="fl">96.55299</span> <span class="dv">29</span>.<span class="dv">7509</span>...</span>
<span id="cb6-50"><a href="#cb6-50" tabindex="-1"></a><span class="dv">5</span>            <span class="dv">23264</span> BUCKNER <span class="dv">034</span> EPSG<span class="sc">:</span><span class="dv">2277</span>  Foot 5791782_BUCKNER 034_g01_1688926582 FEMA Region <span class="dv">6</span>         <span class="dv">23278</span> <span class="fu">POLYGON</span> ((<span class="sc">-</span><span class="fl">96.55418</span> <span class="dv">29</span>.<span class="dv">7420</span>...</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="hydrofabric-cross-section-representations">Hydrofabric cross section representations<a class="anchor" aria-label="anchor" href="#hydrofabric-cross-section-representations"></a>
</h2>
<table class="table">
<colgroup>
<col width="12%">
<col width="71%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th>Attribute</th>
<th>Description</th>
<th>relevant layers</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>hy_id</td>
<td>A hydrofabric specific, globally unique flowpath/flowline
identifier</td>
<td>transects, cs_pts</td>
</tr>
<tr class="even">
<td>geometry</td>
<td>Simple Features Geometry (LINESTRING)</td>
<td>transects</td>
</tr>
<tr class="odd">
<td>cs_source</td>
<td>Source of transect information</td>
<td>transects, cs_pts</td>
</tr>
<tr class="even">
<td>cs_id</td>
<td>Identifier, unique to a hy_id, that increases from the inlet to the
outlet transects</td>
<td>transects</td>
</tr>
<tr class="odd">
<td>cs_measure</td>
<td>Percent along the flowpath from inlet</td>
<td>transects</td>
</tr>
<tr class="even">
<td>cs_length</td>
<td>Width (in meters) of cross section transect</td>
<td>cs_pts</td>
</tr>
<tr class="odd">
<td>pt_id</td>
<td>Identifier, unique to cs_id, that increases from left bank to right
bank</td>
<td>cs_pts</td>
</tr>
<tr class="even">
<td>pt_measure</td>
<td>Distance of cs_id, starting at 0, in meters</td>
<td>cs_pts</td>
</tr>
<tr class="odd">
<td>relative_dist</td>
<td>Percent along the transect from left bank (0-1)</td>
<td>cs_pts</td>
</tr>
<tr class="even">
<td>X</td>
<td>X coordinate in CRS of geometry</td>
<td>cs_pts</td>
</tr>
<tr class="odd">
<td>Y</td>
<td>Y coordinate in CRS of geometry</td>
<td>cs_pts</td>
</tr>
<tr class="even">
<td>Z</td>
<td>Z coordinate (in meters) in CRS of geometry</td>
<td>cs_pts</td>
</tr>
<tr class="odd">
<td>Z_source</td>
<td>Source of elevation data</td>
<td>cs_pts</td>
</tr>
<tr class="even">
<td>roughness</td>
<td>(Optional) Estimated Manning’s Roughness value</td>
<td>cs_pts</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="ras-source-extensions">RAS Source Extensions:<a class="anchor" aria-label="anchor" href="#ras-source-extensions"></a>
</h2>
<table class="table">
<colgroup>
<col width="5%">
<col width="89%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th>Attribute</th>
<th>Description</th>
<th>relevant layers</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>master_id</td>
<td>A catalog specific, globally unique transect hy_id</td>
<td>transects</td>
</tr>
<tr class="even">
<td>mean_shift</td>
<td>The amount of space added to normalize a cross section’s
station-elevation to geographic distance. Positive indicates that
distance was added to the station-elevation series to make it match to
the line (length) as it was specified in the geography. This is reported
as a running sum.</td>
<td>cs_pts</td>
</tr>
<tr class="odd">
<td>roughness</td>
<td>(Optional) status is now (Required)</td>
<td>cs_pts</td>
</tr>
<tr class="even">
<td>Geometry</td>
<td>Simple Features Geometry (POLYGON)</td>
<td>hulls</td>
</tr>
<tr class="odd">
<td>start_master_id</td>
<td>The start master_id of the model cross sections</td>
<td>hulls</td>
</tr>
<tr class="even">
<td>end_master_id</td>
<td>The end master_id of the model cross sections</td>
<td>hulls</td>
</tr>
<tr class="odd">
<td>Name</td>
<td>The name of the model</td>
<td>hulls</td>
</tr>
<tr class="even">
<td>path</td>
<td>the folder path to the original model</td>
<td>hulls</td>
</tr>
<tr class="odd">
<td>crs</td>
<td>the native CRS of the model</td>
<td>hulls</td>
</tr>
<tr class="even">
<td>units</td>
<td>The units of the model (“Feet” or “Meter”)</td>
<td>hulls</td>
</tr>
<tr class="odd">
<td>source</td>
<td>The source of the model</td>
<td>hulls</td>
</tr>
</tbody>
</table>
<div class="section level3">
<h3 id="add-geographic-context">Add geographic context<a class="anchor" aria-label="anchor" href="#add-geographic-context"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">footprints</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_read.html" class="external-link">st_read</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">ras_dbase</span>,<span class="st">"model_footprints.fgb"</span>,fsep <span class="op">=</span> <span class="va">.Platform</span><span class="op">$</span><span class="va">file.sep</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Create a handy map to view</li>
</ol>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">RRASSLER</span><span class="fu">::</span><span class="fu"><a href="../reference/map_library.html">map_library</a></span><span class="op">(</span>path_to_ras_dbase <span class="op">=</span> <span class="va">ras_dbase</span>,<span class="cn">NULL</span>,name <span class="op">=</span> <span class="st">"model_map"</span>,plot_lines <span class="op">=</span> <span class="cn">TRUE</span>,chart_lines <span class="op">=</span> <span class="cn">FALSE</span>,refresh <span class="op">=</span> <span class="cn">FALSE</span>,quiet <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>This function will create a stand alone leaflet map which is useful
in “interactively” exploring the data, facilitating simple queries, and
inspirational presentations.</p>
<p><img src="https://raw.githubusercontent.com/JimColl/RRASSLER/main/man/figures/map_features.PNG"></p>
</div>
<div class="section level3">
<h3 id="extend-database-for-ras2fim-deployments">Extend database for ras2fim deployments<a class="anchor" aria-label="anchor" href="#extend-database-for-ras2fim-deployments"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">RRASSLER</span><span class="fu">::</span><span class="fu"><a href="../reference/append_catalog_fields.html">append_catalog_fields</a></span><span class="op">(</span>path_to_ras_dbase <span class="op">=</span> <span class="va">ras_dbase</span>,out_name <span class="op">=</span> <span class="st">"OWP_ras_model_catalog.csv"</span>,overwrite <span class="op">=</span> <span class="cn">FALSE</span>,is_quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jim Coll, Mike Johnson, Laura Keys, Andy Carter, <a href="https://water.noaa.gov/about/nwm" class="external-link"><img src="https://raw.githubusercontent.com/JimColl/RRASSLER/main/man/figures/noaa-logo.png" height="36" alt="NOAA OWP"></a>, <a href="https://lynker-intel.com/" class="external-link"><img src="https://raw.githubusercontent.com/JimColl/RRASSLER/main/man/figures/lynker-logo.png" height="36" alt="Lynker"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
